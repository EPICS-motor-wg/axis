<?xml version='1.0' encoding='iso-8859-1'?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
     'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>

<html>
<head>
<title>Axis&#x20;Record&#x20;(axis)</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<link rel='stylesheet' href='style.css' type='text/css'>
</head>
<body>




<div class="pod">

<h1 id="Axis-Record-axis">Axis Record (axis)</h1>

<p>The axis Record is a further development of the motor Record. All model 1 drivers have been removed.</p>

<p>For improvements already done, see FixedProblems.txt</p>

<p>Otherwise, see KnownProblems.txt</p>

<h3 id="Menus">Menus</h3>

<p>User Direction:</p>



<blockquote><table border="1"><tr>
<th>Index</th><th>Identifier</th><th>Choice String</th></tr>
<tr>
<td class='cell DBD_Menu index'>0</td>
<td class='cell DBD_Menu identifier'>motorDIR_Pos</td>
<td class='cell DBD_Menu choice'>Pos</td>
</tr>
<tr>
<td class='cell DBD_Menu index'>1</td>
<td class='cell DBD_Menu identifier'>motorDIR_Neg</td>
<td class='cell DBD_Menu choice'>Neg</td>
</tr>
</table></blockquote>

<p>Set or use the VAL field:</p>



<blockquote><table border="1"><tr>
<th>Index</th><th>Identifier</th><th>Choice String</th></tr>
<tr>
<td class='cell DBD_Menu index'>0</td>
<td class='cell DBD_Menu identifier'>motorSET_Use</td>
<td class='cell DBD_Menu choice'>Use</td>
</tr>
<tr>
<td class='cell DBD_Menu index'>1</td>
<td class='cell DBD_Menu identifier'>motorSET_Set</td>
<td class='cell DBD_Menu choice'>Set</td>
</tr>
</table></blockquote>

<p>SET=Set set a position from without moving</p>

<p>SET=Use move to the new position</p>

<p>Change or freeze the OFF field:</p>



<blockquote><table border="1"><tr>
<th>Index</th><th>Identifier</th><th>Choice String</th></tr>
<tr>
<td class='cell DBD_Menu index'>0</td>
<td class='cell DBD_Menu identifier'>motorFOFF_Variable</td>
<td class='cell DBD_Menu choice'>Variable</td>
</tr>
<tr>
<td class='cell DBD_Menu index'>1</td>
<td class='cell DBD_Menu identifier'>motorFOFF_Frozen</td>
<td class='cell DBD_Menu choice'>Frozen</td>
</tr>
</table></blockquote>

<p>When the position is set. SET=Set Freeze the offset when</p>

<p>FOFF = Variable When setting the position, the OFF field is changed</p>

<p>FOFF = Frozen When setting the position, the OFF field stays unchanged and the value is send to the controller.</p>

<p>Ir present, use an external encoder or RDBL Link as read back:</p>



<blockquote><table border="1"><tr>
<th>Index</th><th>Identifier</th><th>Choice String</th></tr>
<tr>
<td class='cell DBD_Menu index'>0</td>
<td class='cell DBD_Menu identifier'>motorUEIP_No</td>
<td class='cell DBD_Menu choice'>No</td>
</tr>
<tr>
<td class='cell DBD_Menu index'>1</td>
<td class='cell DBD_Menu identifier'>motorUEIP_Yes</td>
<td class='cell DBD_Menu choice'>Yes</td>
</tr>
</table></blockquote>

<p>Retry mode:</p>



<blockquote><table border="1"><tr>
<th>Index</th><th>Identifier</th><th>Choice String</th></tr>
<tr>
<td class='cell DBD_Menu index'>0</td>
<td class='cell DBD_Menu identifier'>motorRMOD_D</td>
<td class='cell DBD_Menu choice'>Default</td>
</tr>
<tr>
<td class='cell DBD_Menu index'>1</td>
<td class='cell DBD_Menu identifier'>motorRMOD_A</td>
<td class='cell DBD_Menu choice'>Arithmetic</td>
</tr>
<tr>
<td class='cell DBD_Menu index'>2</td>
<td class='cell DBD_Menu identifier'>motorRMOD_G</td>
<td class='cell DBD_Menu choice'>Geometric</td>
</tr>
<tr>
<td class='cell DBD_Menu index'>3</td>
<td class='cell DBD_Menu identifier'>motorRMOD_I</td>
<td class='cell DBD_Menu choice'>In-Position</td>
</tr>
</table></blockquote>

<p>Stop Pause Move, Go:</p>



<blockquote><table border="1"><tr>
<th>Index</th><th>Identifier</th><th>Choice String</th></tr>
<tr>
<td class='cell DBD_Menu index'>0</td>
<td class='cell DBD_Menu identifier'>motorSPMG_Stop</td>
<td class='cell DBD_Menu choice'>Stop</td>
</tr>
<tr>
<td class='cell DBD_Menu index'>1</td>
<td class='cell DBD_Menu identifier'>motorSPMG_Pause</td>
<td class='cell DBD_Menu choice'>Pause</td>
</tr>
<tr>
<td class='cell DBD_Menu index'>2</td>
<td class='cell DBD_Menu identifier'>motorSPMG_Move</td>
<td class='cell DBD_Menu choice'>Move</td>
</tr>
<tr>
<td class='cell DBD_Menu index'>3</td>
<td class='cell DBD_Menu identifier'>motorSPMG_Go</td>
<td class='cell DBD_Menu choice'>Go</td>
</tr>
</table></blockquote>

<p>Status update:</p>



<blockquote><table border="1"><tr>
<th>Index</th><th>Identifier</th><th>Choice String</th></tr>
<tr>
<td class='cell DBD_Menu index'>0</td>
<td class='cell DBD_Menu identifier'>motorSTUP_OFF</td>
<td class='cell DBD_Menu choice'>OFF</td>
</tr>
<tr>
<td class='cell DBD_Menu index'>1</td>
<td class='cell DBD_Menu identifier'>motorSTUP_ON</td>
<td class='cell DBD_Menu choice'>ON</td>
</tr>
<tr>
<td class='cell DBD_Menu index'>2</td>
<td class='cell DBD_Menu identifier'>motorSTUP_BUSY</td>
<td class='cell DBD_Menu choice'>BUSY</td>
</tr>
</table></blockquote>

<h2 id="Parameter-Fields">Parameter Fields</h2>

<p>The record-specific fields are described below.</p>

<h3 id="Calibration-related-fields">Calibration-related fields</h3>

<p>User and dial coordinates can differ by a sign (the DIR field) and an offset (OFF), according to the following equation:</p>

<p>userVAL = DialVAL * DIR + OFFset This field is &quot;OFFset&quot; in the below equation. It is not normally written to directly by the user.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">DIR</td><td class="cell">User Direction</td><td class="cell">MENU (<a href='#Menu_motorDIR'>motorDIR</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr><tr><td class="cell">OFF</td><td class="cell">User Offset (EGU)</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr><tr><td class="cell">FOFF</td><td class="cell">Offset-Freeze Switch</td><td class="cell">MENU (<a href='#Menu_motorFOFF'>motorFOFF</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">VOF</td><td class="cell">Variable Offset</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">FOF</td><td class="cell">Freeze Offset</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">SET</td><td class="cell">Set/Use Switch</td><td class="cell">MENU (<a href='#Menu_motorSET'>motorSET</a>)</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">SSET</td><td class="cell">Set SET Mode</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">SUSE</td><td class="cell">Set USE Mode</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<h3 id="Homing-fields">Homing fields</h3>

<h3 id="Motor-resolution-fields">Motor-resolution fields</h3>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">MRES</td><td class="cell">Motor Step Size (EGU)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr><tr><td class="cell">SREV</td><td class="cell">Steps per Revolution</td><td class="cell">LONG</td><td class="cell">Yes</td><td class="cell">200</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr><tr><td class="cell">UREV</td><td class="cell">EGU's per Revolution</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>MRES, and (SREV,UREV) represent two ways of specifying the motor resolution--the distance or angle, in engineering units (EGU&#39;s), associated with a single motor step. If the motor step size is unkown (because the controller communicates in engineering units) MRES is the factor between the EGU in the record and the EGU in the controller. Example: If both the record and the controller use &quot;mm&quot;, set MRES to 1.0 If the record would use meter and the controller mm, set MRES to 0.001 See SBDB for a minimal movement The equation relating these quantities is &quot;MRES = UREV/SREV &quot;. Initially, SREV has the value 200, the number of full steps per revolution for most stepper motors, and the record never changes this field. Only the user can change it.</p>

<p>When MRES is changed, the record sets UREV = MRES*SREV.</p>

<p>When UREV or SREV is changed, the motor sets MRES = UREV/SREV.</p>

<p>In all cases, the effect of a motor resolution change on the reported motor position depends in a simple way on the value of the SET field: If (SET = 1), new user and dial values (VAL, DVAL) are calculated from the existing raw value (RVAL). If (SET = 0), a new raw value is calculated from the existing dial value. The motor doesn&#39;t move in either case; neither does the actual motor speed (in revolutions per second) change.</p>

<p>If either MRES or UREV is changed, motor speeds that are expressed in engineering units per second (i.e., those whose names contain the letter &#39;V&#39;:</p>

<p>VELO, BVEL, VMAX and VBAS) are automatically adjusted by the record according to the following equations:</p>

<p>VELO = UREV * S;</p>

<p>BVEL = UREV * SBAK;</p>

<p>VMAX = UREV * SMAX;</p>

<p>VBAS = UREV * SBAS.</p>

<p>Motor speeds that are expressed in revolutions per second (S, SBAK, and SBAS) are independent of changes to MRES or UREV. In contrast, when SREV is changed, only MRES is adjusted by the record, thus allowing all other fields to remain unaffected.</p>

<p>Currently, changes to motor-resolution fields have no effect on the values of limit fields (although they should).</p>

<p>MRES or UREV allow negative values so that the user/dial coordinate systems can be configured to the opposite polarity of the motor controller&#39;s.</p>

<h3 id="Motion-related-fields">Motion-related fields</h3>

<p>VMAX Valid range; 0 &lt;= VMAX. VMAX=0 disables maximum velocity range checking.</p>

<p>SMAX Valid range; 0 &lt;= SMAX</p>

<p>VBAS Valid range; 0 &lt;= VBAS</p>

<p>SBAS Valid range; 0 &lt;= SBAS</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">VMAX</td><td class="cell">Max. Velocity (EGU/s)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">SMAX</td><td class="cell">Max. Speed (RPS)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">VBAS</td><td class="cell">Base Velocity (EGU/s)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">SBAS</td><td class="cell">Base Speed (RPS)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>Range checking is done in such a way that any minimum (i.e., VBAS/SBAS) or maximum (i.e., VMAX/SMAX) value entered is valid.</p>

<p>For example, if the minimum is entered and it exceeds the maximum, then the maximum is set to the new minimum value.</p>

<p>A VMAX value of zero disables maximum velocity range checking.</p>

<p>At boot-up, if one field of a field pair (i.e., VMAX/SMAX, VBAS/SBAS, VELO/S, BVEL/SBAK) is zero and the other field is nonzero, the nonzero field takes precedence. If both fields of a given field pair are nonzero, the RPS member of the field pair (i.e., SMAX, SBAS, S, SBAK) takes precedence.</p>

<p>Slew (VELO/S) and backup (BVEL/SBAK) velocity fields are silently forced by the record to be within the range set by VMAX/SMAX and VBAS/SBAS, inclusively.</p>

<p>Those who use both BURT and VMAX (i.e., nonzero VMAX) should insure that VMAX and VBAS</p>

<p>are placed before VELO and BVEL in their BURT request files.</p>

<p>The intent of VBAS/SBAS is to prevent the motor from moving at speeds slow enough to excite its resonance, which can cause the motor to miss steps. The motor is expected to accelerate from a stand-still to VBAS in one motor pulse. VELO is the speed, in engineering units per second, at which the motor is moved after the acceleration phase of a motion is finished. S is the same speed expressed in revolutions per second. The record makes sure that VELO and S are consistent, using the equation S = VELO/UREV.</p>

<p>VELO Valid range; VBAS &lt;= VELO &lt;= VMAX</p>

<p>S Valid range; SBAS &lt;= S &lt;= SMAX</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">VELO</td><td class="cell">Velocity (EGU/s)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">S</td><td class="cell">Speed (revolutions/sec)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">VBAS</td><td class="cell">Base Velocity (EGU/s)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">ACCL</td><td class="cell">Seconds to Velocity</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">0.2</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>The record expects the hardware to produce a trapezoidal speed profile. That is, the motor speed is expected to increase linearly with time from the base speed, VBAS, to the full speed, VELO, in ACCL seconds. At the end of a motion, the speed is expected to decrease similarly to VBAS.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">JVEL</td><td class="cell">Jog Velocity (EGU/s)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">JAR</td><td class="cell">Jog Accel. (EGU/s^2)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>The velocity and acceleration can be different from what is used during positioning. The velocity is specified in JVEL. Accelaration is measured in EGU/sec^2 and is found in JAR. Note that JAR is specifying the acceleration using EQU/sec^2 while ACCL is specifying the time to reach the maximum velocity. When JAR is 0, VELO / ACCL is used as a fallback.</p>

<p>With the OMS and IMS device drivers, jog velocity can be changed on-the-fly. The velocity will accelerate to the new velocity based on the JAR field.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">BDST</td><td class="cell">BL Distance (EGU)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>The algorithm used in moves to a (dial-coordinate) position called &quot;TARGET&quot; follows:</p>

<p>1) If the motor is to move a distance greater than the magnitude of BDST, or if the motor is to move in a direction opposite to the sign of BDST, then the motor will move first to position (TARGET-BDST), at an acceleration specified by ACCL and speed VELO, and then to position TARGET, at an acceleration specified by BACC and speed BVEL.</p>

<p>2) If the motor is to move a distance smaller than the magnitude of BDST, and if the motor is to move in the same direction as the sign of BDST, then backlash is assumed already to have been taken out, and the motor will move to position TARGET at an acceleration specified by BACC and speed BVEL.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">BVEL</td><td class="cell">BL Velocity (EGU/s)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">SBAK</td><td class="cell">BL Speed (RPS)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">BACC</td><td class="cell">BL Seconds to Velocity</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">0.5</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>The algorithm used in moves to a (dial-coordinate) position called &quot;TARGET&quot; follows:</p>

<p>1) If the motor is to move a distance greater than the magnitude of BDST, or if the motor is to move in a direction opposite to the sign of BDST, then the motor will move first to position (TARGET-BDST), at an acceleration specified by ACCL and speed VELO, and then to position TARGET, at an acceleration specified by BACC and speed BVEL.</p>

<p>2) If the motor is to move a distance smaller than the magnitude of BDST, and if the motor is to move in the same direction as the sign of BDST, then backlash is assumed already to have been taken out, and the motor will move to position TARGET at an acceleration specified by BACC and speed BVEL.</p>

<p>BVEL is the speed, in engineering units per second, at which the motor is move after the acceleration phase of a backlash-takeout motion is finished. SBAK is the same speed expressed in revolutions per second. Neither BVEL nor SBAK may be negative or zero.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">FRAC</td><td class="cell">Move Fraction</td><td class="cell">FLOAT</td><td class="cell">Yes</td><td class="cell">1</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>This field supports closed-loop control of pathological devices for which drive values are not expected to compare reproducibly with readback values. (Inchworms and other friction-driven devices are good examples: the number of steps taken by an inchworm motor is a very poor indicator of the distance it has traveled.)</p>

<p>In a move from position CURRENT to position TARGET, the record will ask hardware to move a distance FRAC*(TARGET-CURRENT). When that motion is complete, the record will request a motion of FRAC*(remaining distance), and so on until the target position has been reached.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">SDBD</td><td class="cell">Setpoint Deadband (EGU)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>Set point Dead Band - the minimal distance a motor can be moved. For an &quot;open loop stepper motor&quot; this the same as MRES. When the controller has an encoder and closes the position loop, it may be MRES or ERES, depending on the controller. In any case: SDBD &lt;= RDBD</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">RDBD</td><td class="cell">Retry Deadband (EGU)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>When the motor has finished a complete motion, possibly including backlash takeout, the record will compare its current position with the desired position. If the magnitude of the difference is greater than RDBD, the motor will try again, as if the user had requested a move from the now current position to the desired position. Only a limited number of retries will be performed (see RTRY).</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">RTRY</td><td class="cell">Max retry count</td><td class="cell">SHORT</td><td class="cell">Yes</td><td class="cell">10</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>The maximum number of times the record will try again to move to the desired position. When the retry limit is reached, the record will declare the motion finished. If the desired position was not reached, the field MISS will be set to 1. If configured in MISV, the record is put into STATE alarm.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">RMOD</td><td class="cell">Retry Mode</td><td class="cell">MENU (<a href='#Menu_motorRMOD'>motorRMOD</a>)</td><td class="cell">Yes</td><td class="cell">Default</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<pre><code> (0:&quot;Unity&quot;, 1:&quot;Arthmetic&quot;, 2:&quot;Geometric&quot;, 3:&quot;In-Position&quot;)</code></pre>

<p>RMOD allows the user to select different ways of calculating the retry distance move. The default mode (Unity) moves the motor a relative distance based on the dial error (DIFF = DRBV-LDVL). Badly behaved devices (piezo motors) can oscillate around their target position in this mode. Hence, two other modes were added to allow a decreasing response from the record after each retry.</p>

<p>The Arithmetic mode generates an arithmetic sequence of corrections. For example, if the max. retry count (RTRY) is 10, then the retries will proceed as follows; DIFF * (1.0), DIFF * (9/10), DIFF * (8/10), etc.</p>

<p>The Geometric mode generates a geometric sequence with a 1/2 common factor of corrections. For example, if the max. retry count is 10, then the retries will proceed as follows; DIFF * (1.0), DIFF * (1/2) DIFF * (1/4), DIFF * (1/8), etc.</p>

<p>The In-Position mode is used only with servos. This mode does not send any motion commands to the controller during a retry. It simply waits for the DIFF field to less than the RDBD field. This mode is intended to be used with nonzero DLY and RTRY fields.</p>

<h3 id="Link-related-fields">Link-related fields</h3>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">OUT</td><td class="cell">Output Specification</td><td class="cell">OUTLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>If Soft Channel device support is specified, this field is an EPICS link; each time DVAL is changed, device support puts DVAL to this link. Otherwise, this field specifies the hardware to be controlled.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">RDBL</td><td class="cell">Readback Location</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>This field specifies the field (of this or any other EPICS record) from which the motor&#39;s current position is to be read when the field URIP (Use Readback If Present) has the value &quot;Yes&quot; (1). If this field does not contain a valid EPICS link, the URIP may as well have the value &quot;No&quot; (0). If Soft Channel device support is specified, this field is monitored for value changes by a CA event task.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">DOL</td><td class="cell">Desired Output Loc</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>If this field contains a valid EPICS link, and the OMSL field has the value &quot;closed_loop&quot; (1), then every time the record is processed, it will get a value for the VAL field from the link and move to that location, ignoring all other drive fields. Closed-loop mode has not been tested extensively.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">OMSL</td><td class="cell">Output Mode Select</td><td class="cell">MENU (<a href='#Menu_menuOmsl'>menuOmsl</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>(0:&quot;supervisory&quot;, 1:&quot;closed_loop&quot;) If this field has the value &quot;closed_loop&quot; (1), and the field DOL contains a valid EPICS link, then every time the record is processed, it will get a value for the VAL field from the link and move to that location, ignoring all other drive fields. Closed-loop mode has not been tested extensively.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">RLNK</td><td class="cell">Readback OutLink</td><td class="cell">OUTLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>If this field contains a valid EPICS link, then every time the record is processed, it will put the (engineering-unit) readback value RBV to that link.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">DINP</td><td class="cell">DMOV Input Link</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>If Soft Channel device support is specified, the value specified by this link is used to set the DONE bit in the MSTA field; which in turn sets the DMOV field.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">RINP</td><td class="cell">RMP Input Link</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>If Soft Channel device support is specified, the value specified by this link is used to set the RMP field.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">STOO</td><td class="cell">STOP OutLink</td><td class="cell">OUTLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>If Soft Channel device support is specified, a one is written to the specified link each time the STOP_AXIS motor command is issued.</p>

<h4 id="Soft-Channel-Device-Driver">Soft Channel Device Driver</h4>

<p>The Soft Channel database links (i.e., DINP, RINP and STOO) are only processed when the Soft Channel device driver is selected. These links are ignored when using any other Record device driver.</p>

<p>The input links (i.e., DINP, RDBL and RINP) are monitored for value changes by a CA event task. Users must choose either a dial input link (RDBL) or a raw input link (RINP), but not both. At this time, the above links are not dynamically retargetable.</p>

<p>Note that Soft Channel device support resets the target position (VAL/DVAL/RVAL) to the actual position (RBV/DRBV/RRBV) the first time, and only the first time, that the PV pointed to by RDBL is posted. Hence, Soft Channel device support requires that the RDBL PV have a valid value the first time it is posted.</p>

<p>Note that JOG[F/R] does not work with the Soft Channel device driver.</p>

<h2 id="Limit-related-Fields">Limit-related Fields</h2>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">HLM</td><td class="cell">User High Limit</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>The maximum allowed value of the VAL field. If HLM changes so that VAL is no longer less than HLM, then the record will set the field LVIO to 1. If the DIR field has the value &quot;Pos&quot;, then HLM will always be consistent with DHLM, otherwise HLM will always be consistent with DLLM.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">LLM</td><td class="cell">User Low Limit</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>The minimum allowed value of the VAL field. If LLM changes so that VAL is no longer greater than LLM, then the record will set the field LVIO to 1. If the DIR field has the value &quot;Pos&quot;, then LLM will always be consistent with DLLM, otherwise LLM will always be consistent with DHLM.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">DHLM</td><td class="cell">Dial High Limit</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>The maximum allowed value of the DVAL field. If DHLM changes so that DVAL is no longer less than DHLM, then the record will set the field LVIO to 1.. If the DIR field has the value &quot;Pos&quot;, then DHLM will always be consistent with HLM, otherwise DHLM will always be consistent with LLM.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">DLLM</td><td class="cell">Dial Low Limit</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>The minimum allowed value of the DVAL field. If DLLM changes so that DVAL is no longer greater than DLLM, then the record will set the field LVIO to 1. If the DIR field has the value &quot;Pos&quot;, then DLLM will always be consistent with LLM, otherwise DLLM will always be consistent with HLM.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">LVIO</td><td class="cell">Limit violation</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">1</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>A value of 1 indicates that the dial-value drive field, DVAL, or the dial-value readback field, DRBV, is outside of the limits (DHLM, DLLM), and this prevents the motor from moving. If the backlash distance, BDST, is non-zero, it further restricts the allowable range of DVAL. When a JOG button is hit, LVIO goes to 1 and stops the motor if/when DVAL gets to within one second&#39;s travel time of either limit.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">HLS</td><td class="cell">User High Limit Switch</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr><tr><td class="cell">RHLS</td><td class="cell">Raw High Limit Switch</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>If either of these fields is nonzero, then the motor is at the positive-limit switch, where the positive sense is that of the user-coordinate system for HLS, and that of the raw (step-number) coordinate system for RHLS.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">LLS</td><td class="cell">User Low Limit Switch</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr><tr><td class="cell">RLLS</td><td class="cell">Raw Low Limit Switch</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>If either of these fields is nonzero, then the motor is at the negative-limit switch, where the positive sense is that of the user-coordinate system for LLS, and that of the raw (step-number) coordinate system for RLLS.</p>

<h2 id="Command-button-fields">Command-button fields</h2>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">SPMG</td><td class="cell">Stop/Pause/Move/Go</td><td class="cell">MENU (<a href='#Menu_motorSPMG'>motorSPMG</a>)</td><td class="cell">No</td><td class="cell">3</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>This field is intended primarily for interactive use, and normally has the value &quot;Go.&quot;</p>

<p>If the user sets this field to &quot;Stop,&quot; the motor will decelerate to a stop, the VAL field will be set equal to the RBV field, and the DVAL field will be set equal to the DRBV field. (These actions ensure that the motor will not start moving again until a drive field is changed.) In any case, the motor will not move while SPMG has the value &quot;Stop&quot; or &quot;Pause.&quot;</p>

<p>If &quot;SPMG&quot; has the value &quot;Move,&quot; the record will reset SPMG to &quot;Pause&quot; when a motion completes. This behavior supports users who want a motor to sit still until they say &quot;Move&quot;, no matter what changes occur in the drive fields.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">STOP</td><td class="cell">Stop</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>When this field is set to 1, the record will immediately reset it to 0, and the motor will decelerate to a stop. When the motor has stopped, VAL will be set equal to RBV, and DVAL will be set equal to DRBV. (This ensures that the motor will not start moving the next time the record is processed, unless a drive field is explicitly changed. If you want the motor to pause, use the SPMG field.)</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">HOMF</td><td class="cell">Home Forward</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr><tr><td class="cell">HOMR</td><td class="cell">Home Reverse</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>When one of these fields is set to 1, the motor will decelerate to a stop if already moving, move in the indicated direction (in dial coordinates) at the acceleration specified by ACCL and a speed specified by HVEL, until the hardware detects the &quot;home&quot; switch has become active. Then the hardware will do something hardware dependent in response to its &quot;home&quot; command, if any. (The OMS hardware causes the motor to decelerate to a stop.) When the motor stops, the VAL field will be set equal to the RBV field, and the DVAL field will be set equal to the DRBV field. These fields can be set to 1, but setting either field to 0 results in an error. The record sets HOM[F/R] to zero when the homing procedure is either completed or aborted.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">JOGF</td><td class="cell">Jog motor Forward</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr><tr><td class="cell">JOGR</td><td class="cell">Jog motor Reverse</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>When one of these fields is set to 1, the motor will decelerate to a stop if already moving, and move in the indicated direction (in user coordinates) at an acceleration specified by ACCL and speed VELO, until the field goes to 0. Then the motor will set VAL to RBV and DVAL to DRBV, decelerate to a stop, and execute a (backlash-corrected, if BDST is nonzero) move to the position at which the field went to 0.</p>

<p>These fields are dangerous when used over channel access, because the motor does not stop moving until a second message is received. If a very busy network should cause that second message to be lost, the motor will travel to its limit switch or hard stop.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">TWF</td><td class="cell">Tweak motor Forward</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr><tr><td class="cell">TWR</td><td class="cell">Tweak motor Reverse</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>When one of these fields is set to 1, the record will immediately reset it to 0, and the motor will move (with backlash takeout if BDST is nonzero) by a distance TWV (in user coordinates) at the acceleration specified by ACCL and at speed VELO.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">TWV</td><td class="cell">Tweak Step Size (EGU)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>This field contains the distance the motor is to move in response to the TWF and TWR buttons.</p>

<h2 id="Drive-fields">Drive fields</h2>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">VAL</td><td class="cell">User Desired Value (EGU</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>This is the desired position in user coordinates. When this field is written to, DVAL and RVAL will be changed correspondingly, and the motor will move (with backlash takeout if BDST is nonzero) to the newly written position.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">DVAL</td><td class="cell">Dial Desired Value (EGU</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>This is the desired position in dial coordinates. When this field is written to, VAL and RVAL will be changed correspondingly, and the motor will move (with backlash takeout if BDST is nonzero) to the newly written position.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">RVAL</td><td class="cell">Raw Desired Value (step</td><td class="cell">LONG</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>This is the desired position in raw coordinates. When this field is written to, VAL and DVAL will be changed correspondingly, and the motor will move (with backlash takeout if BDST is nonzero) to the newly written position.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">RLV</td><td class="cell">Relative Value (EGU)</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>When this field is changed, its value will be added to VAL, the field itself will immediately be reset to 0, and the record will behave as though the VAL field had been changed directly.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">SYNC</td><td class="cell">Sync position</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>When this field is set to Yes(1) the record sets the Drive fields (VAL/DVAL/RVAL) to their readback values (RBV/DRBV/RRBV) and sets the SYNC field back to No(0).</p>

<h2 id="Status-Readback-fields">Status/Readback fields</h2>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">RBV</td><td class="cell">User Readback Value</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>The current motor position, in user coordinates, from the motor hardware (default), or from the encoder supported by the motor-controller hardware (if UEIP is nonzero), or from the readback link RDBL (if URIP is nonzero).</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">DRBV</td><td class="cell">Dial Readback Value</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>The current motor position, in dial coordinates, from the motor hardware (default), or from the encoder supported by the motor-controller hardware (if UEIP is nonzero), or from the readback link RDBL (if URIP is nonzero).</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">DMOV</td><td class="cell">Done moving to value</td><td class="cell">SHORT</td><td class="cell">Yes</td><td class="cell">1</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>This field is set to 0 when the record begins a motion, and remains 0 through any retries and backlash corrections that may be required until the record has completely finished that motion, whereupon the field is set to 1. DMOV is guaranteed to execute and post a 1/0/1 pulse when the motor is commanded to move--even if no motion actually occurs because the motor was commanded to move to its current position.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">MOVN</td><td class="cell">Motor is moving</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>This field is set to 1 while the record believes that the motor actually is moving. This field is not the inverse of DMOV, since it may go to zero during a complex motion, if that motion includes a momentary stop.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">DLY</td><td class="cell">Readback settle time (s)</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>Delay (in seconds) the time between motor controller done and record done (i.e., DMOV).</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">RRBV</td><td class="cell">Raw Readback Value</td><td class="cell">LONG</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>The current position of the motor, encoder, or readback link, as received from whatever source has been selected to provide position information. The units associated with this field depend on the source.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">RMP</td><td class="cell">Raw Motor Position</td><td class="cell">LONG</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>The contents of the hardware&#39;s step-count register. Commanded position read from motor controller. Note: If the controller has a an encoder and if the controller allows to read back the &quot;measured&quot; position, we use the &quot;measured&quot; postion in EthercatMC and IcePAP.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">REP</td><td class="cell">Raw Encoder Position</td><td class="cell">LONG</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>Raw Encoder Position. The contents of the hardware&#39;s encoder-count register If the &quot;Encoder Present&quot; status bit is ON in the MSTA, REP is the raw encoder value read from the controller; if the status bit is OFF, REP is always zero.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">MSTA</td><td class="cell">Motor Status</td><td class="cell">ULONG</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>The motor status as received from the hardware. The MSTA bits are defined as follows:</p>

<pre><code>        Bit  0: DIRECTION: last raw direction; (0:Negative, 1:Positive)
        Bit  1: DONE: motion is complete.
        Bit  2: PLUS_LS: plus limit switch has been hit.
        Bit  3: HOMELS: state of the home limit switch.
        Bit  4: Unused (or slip/stall enabled)
        Bit  5: POSITION: closed-loop position control is enabled. (or power on)
        Bit  6: SLIP_STALL: Slip/Stall detected (eg. fatal following error)
        Bit  7: HOME: if at home position.
        Bit  8: PRESENT: encoder is present.
        Bit  9: PROBLEM: driver stopped polling, or hardware problem
        Bit 10: MOVING: non-zero velocity present.
        Bit 11: GAIN_SUPPORT: motor supports closed-loop position control (or supports power on).
        Bit 12: COMM_ERR: Controller communication error.
        Bit 13: MINUS_LS: minus limit switch has been hit.
        Bit 14: HOMED: the motor has been homed.</code></pre>

<p>The record is put into MAJOR STATE alarm if either SLIP_STALL or PROBLEM bits are detected. If HLSV is set, then the record is put into HIGH alarm if either a high soft limit or hard limit (PLUS_LS) has been reached. Similary for the low limits.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">MFLG</td><td class="cell">Motor Flags</td><td class="cell">ULONG</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>The motor flags as received from the hardware. The MFLG bits are defined as follows:</p>

<pre><code>        Bit 0: MF_HOME_ON_LS: Homing on LS towards LS allowed (e.g. HOMF when HLS)
        Bit 1: MF_STOP_PROB:  Stop the axis when RA_PROBLEM is set</code></pre>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">TDIR</td><td class="cell">Direction of Travel</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>The direction in which the motor is currently traveling (or was most recently traveling), as received from the hardware. If 0, the raw readback value should be decreasing.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">ATHM</td><td class="cell">At HOME</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>The state of the hardware&#39;s &quot;home&quot; switch. If 1, the motor has hit the switch.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">RCNT</td><td class="cell">Retry count</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>The number of times the record has detected failure of the motor to land within the retry-deadband distance of the desired position.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">MISS</td><td class="cell">Ran out of retries</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>If 1, the motor has failed to land on the desired position more than the allowed number of times. This field will be reset the next time the motor succeeds in reaching the desired position.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">RVEL</td><td class="cell">Raw Velocity</td><td class="cell">LONG</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>Speed in steps per second that the motor actually is moving.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">STUP</td><td class="cell">Status Update</td><td class="cell">MENU (<a href='#Menu_motorSTUP'>motorSTUP</a>)</td><td class="cell">Yes</td><td class="cell">OFF</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>The STUP field functions as follows;</p>

<p>Valid values for STUP are OFF(0), ON(1) and BUSY(2). A Channel Access (CA) client writes ON(1) to the STUP field which causes the record to set STUP to BUSY(2) and request a single controller status update. After the status is updated the record sets STUP to OFF(0). CA clients are restricted to writing ON(1) to STUP only when STUP is OFF(0). It is the responsibility of the user to restrict the frequency (and thus the incurred overhead) at which the CA client writes ON(1) to STUP.</p>

<p>With the STUP field it is possible to have another EPICS record periodically write ON(1) to the record&#39;s STUP field. This would result in continuous, periodic status updates.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">ADEL</td><td class="cell">Archive Deadband</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>An archive value is only posted if RBV moves out of the ADEL deadband when compared to the previous value archived. ie. if ((RBV-ALST)&gt;ADEL). ADEL defaults to zero, which would mean that all changes to RBV are archived.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">MDEL</td><td class="cell">Monitor Deadband</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>An monitor value is only posted if RBV moves out of the MDEL deadband when compared to the previous value posted. ie. if ((RBV-MLST)&gt;MDEL). MDEL defaults to zero, which would mean that all value changes to RBV are posted.</p>

<h2 id="Servo-fields">Servo fields</h2>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">PCOF</td><td class="cell">Proportional Gain</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">ICOF</td><td class="cell">Integral Gain</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">DCOF</td><td class="cell">Derivative Gain</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>These fields may be removed at any time.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">CNEN</td><td class="cell">Enable control</td><td class="cell">MENU (<a href='#Menu_motorTORQ'>motorTORQ</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>0:&quot;Disable&quot;, 1:&quot;Enable&quot;) Implementation dependent, typically one of these:</p>

<pre><code>        Enable/Disable Torque control
        Enable/Disable Closed loop in the motion controller
        Enable/Disable Amplifier on/off</code></pre>

<h2 id="Alarm">Alarm</h2>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">HLSV</td><td class="cell">HW Limit Violation Svr</td><td class="cell">MENU (<a href='menuAlarmSevr.html'>menuAlarmSevr</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr><tr><td class="cell">MISV</td><td class="cell">MISS Severity</td><td class="cell">MENU (<a href='menuAlarmSevr.html'>menuAlarmSevr</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr></table></blockquote>

<p>If HLSV is not 0, the record is put into state alarm if the soft limits are violated or a limit switch is hit.</p>

<p>If MISV is not 0, the record is put into state alarm when the MISS field is 1.</p>

<h2 id="Miscellaneous-fields">Miscellaneous fields</h2>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">EGU</td><td class="cell">Engineering Units</td><td class="cell">STRING [16]</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">PREC</td><td class="cell">Display Precision</td><td class="cell">SHORT</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">VERS</td><td class="cell">Code Version</td><td class="cell">FLOAT</td><td class="cell">No</td><td class="cell">1</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>Version number as defined in axisRecord.cc. &lt;MAJOR&gt;.&lt;MINORas3digits&gt;&lt;PatchLevelas3digits&gt;</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">CARD</td><td class="cell">Card Number</td><td class="cell">SHORT</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr></table></blockquote>

<p>For VME based devices (i.e., OMS VME8/44, OMS VME58 and V544) this is the VME card number, derived from the output link. Cards are numbered from zero according to their VME addresses. Oregon Micro Systems series VME8 and VME44 cards occur in the same series, since they are handled by the same driver. Oregon Micro Systems VME58 cards are numbered separately, as are Highland Technology V540 cards. This field is set to -1 for non-VME based device/drivers.</p>

<h2 id="Command-Primitives">Command Primitives</h2>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">INIT</td><td class="cell">Startup commands</td><td class="cell">STRING [40]</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">PREM</td><td class="cell">Pre-move commands</td><td class="cell">STRING [40]</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr><tr><td class="cell">POST</td><td class="cell">Post-move commands</td><td class="cell">STRING [40]</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>None of INIT, PREM or POST is currently supported, probably because no model 3 driver seams to need it.</p>



<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">LOCK</td><td class="cell">Soft Channel Position Lock</td><td class="cell">MENU (<a href='#Menu_menuYesNo'>menuYesNo</a>)</td><td class="cell">Yes</td><td class="cell">NO</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr></table></blockquote>

<p>After a &quot;hard&quot; motor initiated move, Soft Channel device support automatically synchronizes a &quot;soft&quot; motor&#39;s target position with a &quot;hard&quot; motor&#39;s readback position. Soft Channel device support detects that the &quot;hard&quot; motor has initiated the move when it sees the PV pointed to by DINP go false, while the &quot;soft&quot; record&#39;s DMOV is true. Automatic synchronization is undesirable in a multi-axis application. Hence, setting the LOCK field to &quot;YES&quot; disables this automatic synchronization.</p>

<p>...</p>



</div>

</body>
</html>

